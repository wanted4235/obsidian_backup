# üìò –ö–æ–Ω—Å–ø–µ–∫—Ç: –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫ –∑–∞–¥–∞—á (Task) –≤ .NET

## üîπ –í–≤–µ–¥–µ–Ω–∏–µ

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º –∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º –≤ .NET –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **TPL (Task Parallel Library)** ‚Äî –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∞—è –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–æ–º.

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º—ë–Ω:
```csharp
using System.Threading.Tasks;
```

---
## üîπ –û—Å–Ω–æ–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á:

| –ú–µ—Ç–æ–¥ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|-------|----------------|
| `new Task(...)` | –†—É—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫ –∑–∞–¥–∞—á–∏ |
| `Task.Run(...)` | –£–ø—Ä–æ—â—ë–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ñ–æ–Ω–æ–≤—É—é –∑–∞–¥–∞—á—É |
| `Task.Factory.StartNew(...)` | –ì–∏–±–∫–∏–π —Å–ø–æ—Å–æ–± —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ |
| `Task.Delay(...)` | –ó–∞–¥–∞—á–∞, –∑–∞–≤–µ—Ä—à–∞—é—â–∞—è—Å—è —á–µ—Ä–µ–∑ –∑–∞–¥–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è |
| `Task.Yield()` | –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ç–æ—á–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ |
| `Task.FromResult<T>(...)` | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥–æ—Ç–æ–≤—É—é –∑–∞–¥–∞—á—É —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º |
| `Task.FromException<T>(...)` | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—É—é –∑–∞–¥–∞—á—É —Å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º |
| `Task.FromCanceled<T>(...)` | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–º–µ–Ω—ë–Ω–Ω—É—é –∑–∞–¥–∞—á—É |

---
## üß© –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á

| –ú–µ—Ç–æ–¥ | –ù—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å `.Start()`? | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç ThreadPool? | –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é? |
|-------|----------------------------|--------------------------|----------------------------------|
| `new Task(...)` | ‚úÖ –î–∞ | ‚úÖ –î–∞ | ‚ùå –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–µ–Ω –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å |
| `Task.Run(...)` | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ | ‚úÖ –î–∞, —Å–∞–º—ã–π —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–π |
| `Task.Factory.StartNew(...)` | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ | ‚úÖ –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≥–∏–±–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ |
| `Task.Delay(...)` | ‚Äî | ‚ùå –ù–µ—Ç (–æ–∂–∏–¥–∞–µ—Ç) | ‚úÖ –î–ª—è –∑–∞–¥–µ—Ä–∂–µ–∫ |
| `Task.Yield()` | ‚Äî | ‚ùå –ù–µ—Ç (–ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç) | ‚úÖ –î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º |
| `Task.FromResult(...)` | ‚Äî | ‚ùå –ù–µ—Ç | ‚úÖ –î–ª—è –º–æ–∫–æ–≤ –∏ –≥–æ—Ç–æ–≤—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ |
| `Task.FromException(...)` | ‚Äî | ‚ùå –ù–µ—Ç | ‚úÖ –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫ |
| `Task.FromCanceled(...)` | ‚Äî | ‚ùå –ù–µ—Ç | ‚úÖ –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–º–µ–Ω—ã |

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ò—Å–ø–æ–ª—å–∑—É–π `Task.Run()`**, –µ—Å–ª–∏ —Ç–µ–±–µ –Ω—É–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ–Ω–æ–≤—É—é –æ–ø–µ—Ä–∞—Ü–∏—é.
2. **–ò–∑–±–µ–≥–∞–π `new Task().Start()`**, –µ—Å–ª–∏ –Ω–µ—Ç –æ—Å–æ–±–æ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ ‚Äî —ç—Ç–æ —É—Å—Ç–∞—Ä–µ–≤—à–∏–π –ø–æ–¥—Ö–æ–¥.
3. **–ò—Å–ø–æ–ª—å–∑—É–π `Task.FromResult`**, –µ—Å–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É–∂–µ –∏–∑–≤–µ—Å—Ç–µ–Ω.
4. **–ù–µ –∑–∞–±—ã–≤–∞–π –ø—Ä–æ `CancellationToken`**, –µ—Å–ª–∏ —Ä–∞–±–æ—Ç–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–º–µ–Ω–µ–Ω–∞.
5. **–£—á–∏—Ç—ã–≤–∞–π –∫–æ–Ω—Ç–µ–∫—Å—Ç**, –æ—Å–æ–±–µ–Ω–Ω–æ –≤ UI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö: –∏—Å–ø–æ–ª—å–∑—É–π `ConfigureAwait(false)` —Ç–∞–º, –≥–¥–µ –Ω–µ –Ω—É–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—Ç –≤ UI-–ø–æ—Ç–æ–∫.

---

## üìä **–ö–∞–∫ –≤—ã–±—Ä–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏?**

| –¶–µ–ª—å / –°—Ü–µ–Ω–∞—Ä–∏–π | –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –º–µ—Ç–æ–¥ | –ü–æ—á–µ–º—É? |
|------------------|----------------------|----------|
| –ù—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ–Ω–æ–≤—É—é –æ–ø–µ—Ä–∞—Ü–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –∏–ª–∏ IO) | ‚úÖ `Task.Run(() => {...})` | –ü—Ä–æ—Å—Ç–æ–π –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–±. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ –ø—É–ª–µ –ø–æ—Ç–æ–∫–æ–≤. –ù–µ —Ç—Ä–µ–±—É–µ—Ç `.Start()`. |
| –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `LongRunning`, `AttachedToParent`) | ‚úÖ `Task.Factory.StartNew(...)` | –ü–æ–∑–≤–æ–ª—è–µ—Ç —É–∫–∞–∑–∞—Ç—å `TaskCreationOptions` –∏ `TaskScheduler`. –ì–∏–±–∫–∏–π, –Ω–æ —Å–ª–æ–∂–Ω–µ–µ. |
| –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É –≤—Ä—É—á–Ω—É—é –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–∑–∂–µ | ‚úÖ `new Task(...)` + `.Start()` | –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –º–æ–º–µ–Ω—Ç–æ–º –∑–∞–ø—É—Å–∫–∞. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–¥–∫–æ. |
| –ù—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –≥–æ—Ç–æ–≤—É—é –∑–∞–¥–∞—á—É —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –º–æ–∫–∞—Ö –∏–ª–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–∏) | ‚úÖ `Task.FromResult(result)` | –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ —É–∂–µ –∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞. |
| –ù—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –∑–∞–¥–∞—á—É —Å –æ—à–∏–±–∫–æ–π (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π) | ‚úÖ `Task.FromException<T>(exception)` | –£–¥–æ–±–Ω–æ –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –æ—à–∏–±–æ–∫ –∏–ª–∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π. |
| –ù—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –æ—Ç–º–µ–Ω—ë–Ω–Ω—É—é –∑–∞–¥–∞—á—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —Ç–æ–∫–µ–Ω–∞ –æ—Ç–º–µ–Ω—ã) | ‚úÖ `Task.FromCanceled<T>(token)` | –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ª–æ–≥–∏–∫–∏ –æ—Ç–º–µ–Ω—ã. |
| –ù—É–∂–Ω–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ (–ø–∞—É–∑–∞ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ—Ç–æ–∫–∞) | ‚úÖ `Task.Delay(milliseconds)` | –õ—É—á—à–µ, —á–µ–º `Thread.Sleep`, –æ—Å–æ–±–µ–Ω–Ω–æ –≤ UI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö –∏ async-–º–µ—Ç–æ–¥–∞—Ö. |
| –ù—É–∂–Ω–æ –æ—Å–≤–æ–±–æ–¥–∏—Ç—å —Ç–µ–∫—É—â–∏–π –ø–æ—Ç–æ–∫ –∏ –¥–∞—Ç—å –¥—Ä—É–≥–∏–º –∑–∞–¥–∞—á–∞–º —à–∞–Ω—Å –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è | ‚úÖ `Task.Yield()` | –ü–æ–ª–µ–∑–Ω–æ –≤ UI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö –∏–ª–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º. |
| –ù—É–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ UI-–ø–æ—Ç–æ–∫–µ –ø–æ—Å–ª–µ await | ‚ùó–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `await task;`<br>–∏–ª–∏<br>`task.ContinueWith(..., uiScheduler)` | `await` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç. –î–ª—è `ContinueWith` ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `TaskScheduler.FromCurrentSynchronizationContext()`. |

---

## üß† –ö—Ä–∞—Ç–∫–∏–µ —Å–æ–≤–µ—Ç—ã:

- **–î–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤ –∏—Å–ø–æ–ª—å–∑—É–π `Task.Run()`** ‚Äî –æ–Ω –ø—Ä–æ—â–µ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ.
- **–ò–∑–±–µ–≥–∞–π `new Task().Start()`**, –µ—Å–ª–∏ –Ω–µ –Ω—É–∂–µ–Ω –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å.
- **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π `Thread.Sleep` –≤ –∑–∞–¥–∞—á–∞—Ö** ‚Äî –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –ø—Ä–∏–º–µ–Ω—è–π `await Task.Delay(...)`.
- **–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å UI –∏—Å–ø–æ–ª—å–∑—É–π `ConfigureAwait(false)`** –≤ –±–∏–±–ª–∏–æ—Ç–µ—á–Ω–æ–º –∫–æ–¥–µ, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∑–∞—Ö–≤–∞—Ç–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.
- **–î–ª—è —Ç–µ—Å—Ç–æ–≤ –∏ –∑–∞–≥–ª—É—à–µ–∫** –∏—Å–ø–æ–ª—å–∑—É–π `FromResult`, `FromException`, `FromCanceled`.

---
