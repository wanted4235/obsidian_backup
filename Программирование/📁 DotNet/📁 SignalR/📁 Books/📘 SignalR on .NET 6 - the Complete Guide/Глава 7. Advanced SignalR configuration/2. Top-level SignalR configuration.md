## Top-level SignalR configuration

В Program.cs добавляется:
```C#
builder.Services.AddSignalR();
```

В данном сервисе добавляются настройка hubOptions:

```C#
builder.Services.AddSignalR(hubOptions => {
    hubOptions.KeepAliveInterval = TimeSpan.FromSeconds(10);
    hubOptions.MaximumReceiveMessageSize = 65_536;
    hubOptions.HandshakeTimeout = TimeSpan.FromSeconds(15);
    hubOptions.MaximumParallelInvocationsPerClient = 2;
    hubOptions.EnableDetailedErrors = true;
    hubOptions.StreamBufferCapacity = 15;

    if (hubOptions?.SupportedProtocols is not null)
    {
        foreach (var protocol in hubOptions.SupportedProtocols)
            Console.WriteLine($"SignalR supports {protocol} protocol.");
    }

});
```

Обзор настроек:

| Параметр                                | Описание                                                                                                                                                                                                                                                                                                                                                                               |
| --------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **KeepAliveInterval**                   | Когда клиент подключается к серверу, соединение поддерживается с помощью регулярной отправки ping-запросов. Этот параметр определяет интервал между запросами. По умолчанию — 15 секунд. Более короткий интервал позволяет быстрее обнаруживать разрывы соединения, но использует больше трафика. Более длинный интервал экономит трафик, но замедляет обнаружение отключения клиента. |
| **MaximumReceiveMessageSize**           | Максимальный размер сообщения, которое может быть отправлено клиентом хабу (в байтах). По умолчанию — 32 КБ. Увеличьте значение, если ожидаете большие сообщения. Уменьшите, если система работает с множеством маленьких сообщений для повышения производительности.                                                                                                                  |
| **HandshakeTimeout**                    | Время, в течение которого сервер ожидает ответа от клиента при установлении соединения. По умолчанию — 15 секунд. Уменьшите, если используется высокоскоростная сеть, чтобы быстрее обнаруживать разрывы. Увеличьте, если клиенты могут находиться в медленных сетях.                                                                                                                  |
| **MaximumParallelInvocationsPerClient** | По умолчанию клиент может одновременно выполнять только один метод хаба. Следующий вызов ставится в очередь. Этот параметр задаёт количество параллельно выполняемых методов. Чем выше значение, тем выше производительность клиента, но возрастает нагрузка на сервер. Не рекомендуется использовать большое значение, если много клиентов вызывают методы подряд.                    |
| **EnableDetailedErrors**                | Если включено, клиенты будут получать детальные ошибки сервера при исключениях в методах хаба. По умолчанию отключено.                                                                                                                                                                                                                                                                 |
| **StreamBufferCapacity**                | Максимальное количество элементов, которые могут быть загружены в поток от клиента к серверу. По умолчанию — 10. При достижении лимита новые элементы блокируются до обработки старых. Более высокое значение ускоряет обработку потока, но требует больше вычислительных ресурсов.                                                                                                    |
| **SupportedProtocols**                  | Список протоколов, поддерживаемых сервером. Имена записываются строчными буквами, например: `json`, `messagepack`. JSON поддерживается по умолчанию, MessagePack нужно включить отдельно. Настройка считается избыточной, так как существуют более удобные способы управления поддерживаемыми протоколами.                                                                             |
