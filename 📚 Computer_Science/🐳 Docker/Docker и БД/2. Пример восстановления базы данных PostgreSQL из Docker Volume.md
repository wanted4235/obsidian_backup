–ö–æ–Ω–µ—á–Ω–æ! –î–∞–≤–∞–π —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º **—Ä–µ–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL**, –µ—Å–ª–∏ —É —Ç–µ–±—è —É–∂–µ –±—ã–ª —Å–æ–∑–¥–∞–Ω `docker volume` –∏ —Ç—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–ª—É—á–∞–π–Ω–æ —É–¥–∞–ª–∏–ª –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –Ω–æ **–¥–∞–Ω–Ω—ã–µ –≤ volume –æ—Å—Ç–∞–ª–∏—Å—å**.

---

### üéØ –¶–µ–ª—å:
–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å PostgreSQL-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –∏—Å–ø–æ–ª—å–∑—É—è **—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π Docker volume** —Å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

---

## üîß –®–∞–≥ 1: –£–±–µ–¥–∏—Å—å, —á—Ç–æ volume —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

–°–Ω–∞—á–∞–ª–∞ –ø–æ—Å–º–æ—Ç—Ä–∏, –∫–∞–∫–∏–µ volumes —É —Ç–µ–±—è –µ—Å—Ç—å:

```bash
docker volume ls
```

–¢—ã –¥–æ–ª–∂–µ–Ω —É–≤–∏–¥–µ—Ç—å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:

```
DRIVER    VOLUME NAME
local     my-db-data
```

–ï—Å–ª–∏ —Ç—ã –Ω–µ –ø–æ–º–Ω–∏—à—å –∏–º—è volume ‚Äî –º–æ–∂–µ—à—å –ø–æ–∏—Å–∫–∞—Ç—å –ø–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –∏–ª–∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –∫–∞–∫–∏–µ volumes –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è (–±—ã–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã):

```bash
docker volume inspect my-db-data
```

(–ó–∞–º–µ–Ω–∏ `my-db-data` –Ω–∞ –∏–º—è —Ç–≤–æ–µ–≥–æ volume.)

---

## üêò –®–∞–≥ 2: –ó–∞–ø—É—Å—Ç–∏ –Ω–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å —ç—Ç–∏–º volume

–¢–µ–ø–µ—Ä—å –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏ –Ω–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä PostgreSQL, **–ø–æ–¥–∫–ª—é—á–∏–≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π volume**:

```bash
docker run -d \
  --name postgres-restored \
  -e POSTGRES_PASSWORD=secret \
  -v my-db-/var/lib/postgresql/data \
  -p 5432:5432 \
  postgres:15
```

> ‚ö†Ô∏è –í–∞–∂–Ω–æ: –£–±–µ–¥–∏—Å—å, —á—Ç–æ –≤–µ—Ä—Å–∏—è PostgreSQL —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ç–æ–π, —á—Ç–æ –±—ã–ª–∞ —Ä–∞–Ω–µ–µ, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –º–µ—Å—Ç–µ

–ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ –±–∞–∑–µ —á–µ—Ä–µ–∑ `psql`:

```bash
docker exec -it postgres-restored psql -U postgres
```

–¢–µ–ø–µ—Ä—å –º–æ–∂–µ—à—å –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ –±–∞–∑:

```sql
\l
```

–ò–ª–∏ –∑–∞–π–¥–∏ –≤ —Å–≤–æ—é –±–∞–∑—É –∏ –ø—Ä–æ–≤–µ—Ä—å —Ç–∞–±–ª–∏—Ü—ã:

```sql
\c –∏–º—è_—Ç–≤–æ–µ–π_–±–∞–∑—ã
\dt
SELECT * FROM –∫–∞–∫–∞—è-–Ω–∏–±—É–¥—å_—Ç–∞–±–ª–∏—Ü–∞ LIMIT 5;
```

–ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è ‚Äî **–≤—Å—ë –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ!**

---

## üíæ –ê —á—Ç–æ, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –¥–∞–º–ø–∞ (—Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏)?

–ò–Ω–æ–≥–¥–∞ volume –µ—Å—Ç—å, –Ω–æ –¥–∞–Ω–Ω—ã–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω—ã –∏–ª–∏ –Ω—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –ë–î –∫ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é ‚Äî —Ç–æ–≥–¥–∞ –ø—Ä–∏–≥–æ–∂–¥–∞–µ—Ç—Å—è **–±—ç–∫–∞–ø –≤ –≤–∏–¥–µ SQL-–¥–∞–º–ø–∞**.

### –ü—Ä–∏–º–µ—Ä: –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ SQL-—Ñ–∞–π–ª–∞ (`backup.sql`)

1. –ü–æ–º–µ—Å—Ç–∏ —Ñ–∞–π–ª `backup.sql` –≤ –∫–∞–∫—É—é-–Ω–∏–±—É–¥—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é, –Ω–∞–ø—Ä–∏–º–µ—Ä: `/tmp/backup.sql`

2. –ó–∞–ø—É—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å volume (–∫–∞–∫ –≤—ã—à–µ), –Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Å–º–æ–Ω—Ç–∏—Ä—É–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å –±—ç–∫–∞–ø–æ–º:

```bash
docker run -d \
  --name postgres-with-backup \
  -e POSTGRES_PASSWORD=secret \
  -v my-db-/var/lib/postgresql/data \
  -v /tmp:/backup \
  -p 5432:5432 \
  postgres:15
```

3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏ –¥–∞–º–ø:

```bash
docker exec -i postgres-with-backup \
  psql -U postgres -d –∏–º—è_–±–∞–∑—ã < /tmp/backup.sql
```

> –ï—Å–ª–∏ –≤ –¥–∞–º–ø–µ –Ω–µ—Ç —Å–æ–∑–¥–∞–Ω–∏—è –±–∞–∑—ã ‚Äî —Å–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–π –µ—ë:

```bash
docker exec -it postgres-with-backup createdb -U postgres myapp_db
```

---

## üîÑ –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –î–µ–π—Å—Ç–≤–∏–µ | –ö–æ–º–∞–Ω–¥–∞ |
|--------|--------|
| –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å volume | `docker volume inspect my-db-data` |
| –£–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å volume | `docker rm -f container_name` |
| –£–¥–∞–ª–∏—Ç—å volume (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!) | `docker volume rm my-db-data` |
| –°–æ–∑–¥–∞—Ç—å volume –≤—Ä—É—á–Ω—É—é | `docker volume create my-db-data` |

---

## üí° –°–æ–≤–µ—Ç—ã

- –†–µ–≥—É–ª—è—Ä–Ω–æ –¥–µ–ª–∞–π –±—ç–∫–∞–ø—ã:  
  ```bash
  docker exec postgres-container pg_dump -U postgres –∏–º—è_–±–∞–∑—ã > backup_$(date +%F).sql
  ```

- –ò—Å–ø–æ–ª—å–∑—É–π `docker-compose` ‚Äî —Ç–∞–º volume –ª–µ–≥–∫–æ –æ–ø–∏—Å–∞—Ç—å –∏ –Ω–µ –ø–æ—Ç–µ—Ä—è—Ç—å.

- –í production –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **managed-—Å–µ—Ä–≤–∏—Å—ã** (RDS, Cloud SQL), –Ω–æ –¥–ª—è dev/staging ‚Äî volume + –±—ç–∫–∞–ø—ã ‚Äî –æ—Ç–ª–∏—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ.

---

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, –º–æ–≥—É –ø–æ–∫–∞–∑–∞—Ç—å `docker-compose.yml` —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º –∏–∑ –¥–∞–º–ø–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ. –ù–∞–ø–∏—à–∏! üòä