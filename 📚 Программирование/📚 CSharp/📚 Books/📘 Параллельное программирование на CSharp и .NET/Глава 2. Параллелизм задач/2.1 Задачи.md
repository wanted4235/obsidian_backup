## üìò –ö–æ–Ω—Å–ø–µ–∫—Ç: –ó–∞–¥–∞—á–∏ (Task) –≤ .NET

### üîπ –ß—Ç–æ —Ç–∞–∫–æ–µ –∑–∞–¥–∞—á–∏ (Task)?
- **–ó–∞–¥–∞—á–∏ (Task)** ‚Äî —ç—Ç–æ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ .NET.
- –ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—É—é –∑–∞–º–µ–Ω—É —Ä–∞–±–æ—Ç—ã —Å –ø–æ—Ç–æ–∫–∞–º–∏ (`Thread`) –∏ `ThreadPool`.
- –ü–æ—Ö–æ–∂–∏ –Ω–∞ **Promise** –≤ JavaScript ‚Äî –ø–æ–∑–≤–æ–ª—è—é—Ç —É–¥–æ–±–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º –∫–æ–¥–æ–º.
- –ó–∞–¥–∞—á–∏ "–æ–±—ë—Ä—Ç—ã–≤–∞—é—Ç" –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã, –∑–∞–ø—É—Å–∫–∞—è –µ—ë —á–µ—Ä–µ–∑ **–ø—É–ª –ø–æ—Ç–æ–∫–æ–≤ (ThreadPool)**.

---

### üîπ –ü–æ—á–µ–º—É –∑–∞–¥–∞—á–∏ –ª—É—á—à–µ –ø–æ—Ç–æ–∫–æ–≤?
| –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å | –ß–µ—Ä–µ–∑ Thread | –ß–µ—Ä–µ–∑ Task |
|------------|--------------|------------|
| –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º | –†—É—á–Ω–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ `.Join()` | `.Wait()` –∏–ª–∏ `await` |
| –í–æ–∑–≤—Ä–∞—Ç –∑–Ω–∞—á–µ–Ω–∏—è | –ù—É–∂–Ω—ã –¥–µ–ª–µ–≥–∞—Ç—ã –∏ —Ä—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | –ï—Å—Ç—å `Task<TResult>` |
| –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π | –°–ª–æ–∂–Ω–æ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ `.Exception` |
| –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è | –ù—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ | `.ContinueWith()` |
| –ü–æ—Ç–æ–∫–æ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å | –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ | –ò—Å–ø–æ–ª—å–∑—É—é—Ç –ø—É–ª –ø–æ—Ç–æ–∫–æ–≤ |
| –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞ | –°–ª–æ–∂–Ω—ã–π –∏ –º–Ω–æ–≥–æ—Å–ª–æ–≤–Ω—ã–π | –ü—Ä–æ—Å—Ç–æ–π –∏ –ª–æ–≥–∏—á–Ω—ã–π |

---

### üîπ –û—Å–Ω–æ–≤–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞–¥–∞—á:

1. **–í—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ [[Task Sheduler]]**
   - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `ThreadPoolTaskScheduler`, —Ä–∞–±–æ—Ç–∞—é—â–∏–π –Ω–∞ –ø—É–ª–µ –ø–æ—Ç–æ–∫–æ–≤.
   - –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è (—Ä–µ–¥–∫–æ).

2. **–í–æ–∑–≤—Ä–∞—Ç –∑–Ω–∞—á–µ–Ω–∏—è**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–±–æ–±—â—ë–Ω–Ω—ã–π —Ç–∏–ø `Task<T>`, –≥–¥–µ `T` ‚Äî —Ç–∏–ø –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è.
   - –ù–∞–ø—Ä–∏–º–µ—Ä:
     ```csharp
     Task<int> task = Task.Run(() => 42);
     int result = await task;
     ```

3. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏**
   - –°–≤–æ–π—Å—Ç–≤–æ `IsCompleted`, —Å–æ–±—ã—Ç–∏—è `ContinueWith` –¥–∞—é—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ.
   - –≠—Ç–æ —É–¥–æ–±–Ω–µ–µ, —á–µ–º —Ä—É—á–Ω–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `Thread.Join()`.

4. **–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏**
   - –ú–µ—Ç–æ–¥ `ContinueWith()` –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–∫–∞–∑–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –Ω–∞—á–Ω—ë—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∑–∞–¥–∞—á–∏.
   - –ü—Ä–∏–º–µ—Ä:
     ```csharp
     Task task1 = Task.Run(() => Console.WriteLine("Task 1"));
     task1.ContinueWith(t => Console.WriteLine("Task 1 finished"));
     ```

5. **–ë–ª–æ–∫–∏—Ä—É—é—â–µ–µ –æ–∂–∏–¥–∞–Ω–∏–µ**
   - –ú–µ—Ç–æ–¥ `Task.Wait()` –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ç–µ–∫—É—â–∏–π –ø–æ—Ç–æ–∫ –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏.
   - –ú–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–∞–∫ –≤ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º, —Ç–∞–∫ –∏ –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º –∫–æ–¥–µ, –Ω–æ **–≤ UI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å deadlock** –ø—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏.

6. **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞**
   - –ó–∞–¥–∞—á–∏ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ø—Ä–æ—â–∞—é—Ç –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞.
   - –° –ø–æ—è–≤–ª–µ–Ω–∏–µ–º –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ `async/await` –≤ C# 5.0 —Ä–∞–±–æ—Ç–∞ —Å –∑–∞–¥–∞—á–∞–º–∏ —Å—Ç–∞–ª–∞ –µ—â—ë –ø—Ä–æ—â–µ –∏ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–µ–µ.

7. **–ò–µ—Ä–∞—Ä—Ö–∏—è –∑–∞–¥–∞—á (—Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ/–¥–æ—á–µ—Ä–Ω–∏–µ)**
   - –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥–æ—á–µ—Ä–Ω–∏–µ –∑–∞–¥–∞—á–∏ –≤–Ω—É—Ç—Ä–∏ –¥—Ä—É–≥–∏—Ö –∑–∞–¥–∞—á.
   - –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏—á–µ—Å–∫–∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏.
   - –ü—Ä–∏–º–µ—Ä:
     ```csharp
     var parent = Task.Factory.StartNew(() =>
     {
         var child = Task.Run(() => Console.WriteLine("Child task"));
     });
     ```

8. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π**
   - –ò—Å–∫–ª—é—á–µ–Ω–∏—è –≤ –∑–∞–¥–∞—á–∞—Ö –æ–±–æ—Ä–∞—á–∏–≤–∞—é—Ç—Å—è –≤ `AggregateException`.
   - –î–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ —Å–≤–æ–π—Å—Ç–≤–æ `Task.Exception`.
   - –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `await`, –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è.

9. **–û—Ç–º–µ–Ω–∞ –∑–∞–¥–∞—á**
   - –†–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `CancellationTokenSource` –∏ `CancellationToken`.
   - –ü—Ä–∏–º–µ—Ä:
     ```csharp
     var cts = new CancellationTokenSource();
     Task task = Task.Run(() =>
     {
         while (!cts.Token.IsCancellationRequested)
         {
             // Do work...
         }
     }, cts.Token);

     cts.Cancel(); // –û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–¥–∞—á—É
     ```

---

### üîπ –ü–æ–ª–µ–∑–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:

| –ú–µ—Ç–æ–¥ / –ö–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------------------|----------|
| `Task.Run(Action)` | –ó–∞–ø—É—Å–∫ –∑–∞–¥–∞—á–∏ –≤ –ø—É–ª–µ –ø–æ—Ç–æ–∫–æ–≤ |
| `Task.Factory.StartNew(...)` | –ë–æ–ª–µ–µ –≥–∏–±–∫–∏–π —Å–ø–æ—Å–æ–± —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á |
| `await task` | –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ—Ç–æ–∫–∞ |
| `task.Wait()` | –ë–ª–æ–∫–∏—Ä—É—é—â–µ–µ –æ–∂–∏–¥–∞–Ω–∏–µ |
| `task.Result` | –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (–±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ—Ç–æ–∫, –µ—Å–ª–∏ –∑–∞–¥–∞—á–∞ –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∞) |
| `ContinueWith(...)` | –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ |
| `Task.WhenAll(tasks)` | –û–∂–∏–¥–∞–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á |
| `Task.WhenAny(tasks)` | –ñ–¥—ë—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–µ—Ä–≤–æ–π –∏–∑ –∑–∞–¥–∞—á |

---

### üîπ –°–æ–≤–µ—Ç—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
- **–ü—Ä–∏–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ—Å—å async/await** ‚Äî —ç—Ç–æ —Å–∞–º—ã–π —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏ —á–∏—Ç–∞–µ–º—ã–π —Å–ø–æ—Å–æ–± —Ä–∞–±–æ—Ç—ã —Å –∑–∞–¥–∞—á–∞–º–∏.
- **–ò–∑–±–µ–≥–∞–π—Ç–µ `.Result` –∏ `.Wait()` –≤ UI-–ø–æ—Ç–æ–∫–µ**, —á—Ç–æ–±—ã –Ω–µ –≤—ã–∑–≤–∞—Ç—å deadlock.
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `ConfigureAwait(false)`** –≤ –±–∏–±–ª–∏–æ—Ç–µ—á–Ω–æ–º –∫–æ–¥–µ, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∑–∞—Ö–≤–∞—Ç–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.
- **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `Thread.Sleep` –≤ –∑–∞–¥–∞—á–∞—Ö**, –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –ø—Ä–∏–º–µ–Ω—è–π—Ç–µ `await Task.Delay(...)`.
- **–õ–æ–≥–∏—Ä—É–π—Ç–µ –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è** –≤ –∑–∞–¥–∞—á–∞—Ö, –æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `ContinueWith`.
